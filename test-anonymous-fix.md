# 匿名发帖功能修复测试

## 问题描述
用户反映在创建帖子时，即使没有选择匿名选项，所有帖子都显示为 "Anonymous"。

## 修复内容

### 1. 前端修复 (NewPostClient.jsx)
- 添加了 `selectedIdentity` 状态来跟踪用户选择的身份
- 在提交帖子时正确传递 `is_anonymous` 字段
- 在草稿保存和加载时正确处理匿名状态
- 更新身份选择下拉菜单的点击事件

### 2. API 修复 (draft/route.js)
- 在草稿保存 API 中添加对 `is_anonymous` 字段的支持
- 在更新草稿时包含匿名状态

### 3. 显示逻辑修复
- 更新 `PostsList.jsx` 和 `PostCard.jsx` 中的作者显示逻辑
- 根据 `post.is_anonymous` 字段决定显示用户名还是 "Anonymous"
- 添加翻译支持，使用 `t('anonymousPost')` 而不是硬编码文本

## 测试步骤
1. 创建新帖子，选择默认身份，验证显示用户名
2. 创建新帖子，选择匿名身份，验证显示 "Anonymous"
3. 保存草稿，重新加载，验证身份选择被正确恢复
4. 在帖子列表中验证匿名和非匿名帖子的显示

## 预期结果
- 默认身份的帖子显示用户的真实姓名/用户名
- 匿名身份的帖子显示 "Anonymous" 或翻译后的匿名文本
- 草稿功能正确保存和恢复身份选择